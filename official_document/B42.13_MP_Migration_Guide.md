Below is the **Markdown conversion** of the provided *Migration Guide* document, preserving structure and code blocks. Source content is taken directly from the uploaded file .

---

# Migration Guide

## Registries

In version **42.13**, the method for adding certain identifiers has changed.
These identifiers are used in **scripts** and **recipes**.

### Identifiers

* `CharacterTrait`
* `CharacterProfession`
* `ItemTag`
* `Brochure`
* `Flier`
* `ItemBodyLocation`
* `ItemType`
* `MoodleType`
* `WeaponCategory`
* `Newspaper`
* `AmmoType`

To add and use these identifiers, you must register them **via Lua** in a file named:

```
media/registries.lua
```

**Important requirements:**

* The file **must** be named exactly `registries.lua`
* It **must** be placed in the `media` folder
* It is loaded **before scripts** and **before any other Lua files**

---

## Example: Adding IDs (Lua)

```lua
CharacterTrait.register("testmod:nimblefingers")
CharacterProfession.register("testmod:thief")
ItemTag.register("testmod:bobbypin")
Brochure.register("testmod:Village")
Flier.register("testmod:BirdMilk")
ItemBodyLocation.register("testmod:MiddleFinger")
ItemType.register("testmod:gamedev")
MoodleType.register("testmod:Happy")
WeaponCategory.register("testmod:birb")
Newspaper.register("testmod:BirdNews", List.of(
    "BirdKnews_July30",
    "BirdKnews_July2"
))

local item_key = ItemKey.new("bullets_666", ItemType.NORMAL)
AmmoType.register("testmod:duck_bullets", item_key)
```

---

## Example: Usage in Scripts

### Character Trait Definition

```txt
character_trait_definition testmod:nimblefingers
{
    IsProfessionTrait = false,
    DisabledInMultiplayer = false,
    CharacterTrait = testmod:nimblefingers,
    Cost = 3,
    UIName = UI_trait_nimblefingers,
    UIDescription = UI_trait_nimblefingersDesc,
    XPBoosts = Lockpicking=2,
    GrantedRecipes =
        Lockpicking;AlarmCheck;CreateBobbyPin;CreateBobbyPin2,
}
```

---

### Craft Recipe

```txt
craftRecipe CreateBobbyPin
{
    timedAction = Making,
    Time = 40,
    Tags = InHandCraft;CanBeDoneInDark,
    needTobeLearn = true,

    inputs
    {
        item 1 tags[base:screwdriver] mode:keep
            flags[MayDegradeLight;Prop1],
        item 1 [Base.Paperclip],
    }

    outputs
    {
        item 1 TestMod.HandmadeBobbyPin,
    }
}
```

---

### Character Profession Definition

```txt
character_profession_definition testmod:thief
{
    CharacterProfession = testmod:thief,
    Cost = 2,
    UIName = UI_prof_Thief,
    IconPathName = profession_burglar2,
    XPBoosts = Nimble=3;Sneak=2;Lightfoot=1;Lockpicking=2,
    GrantedTraits = testmod:nimblefingers,
}
```

---

### Item Definition

```txt
item HandmadeBobbyPin
{
    Weight = 0.01,
    ItemType = base:normal,
    Icon = HandmadeBobbyPin,
    Tags = testmod:bobbypin,
    Tooltip = Tooltip_TestMod_BobbyPin,
    WorldStaticModel = Paperclip,
}
```

---

## Notes on API and Script Changes

* Some **Lua APIs have been modified**
* If functionality has stopped working, inspect the **decompiled Java code**
* Additional API changes are expected in upcoming unstable patches

### Item Script Changes

* `DisplayName` has been **removed**

  * Translations are now resolved **only** via `Module.ItemId`
* `Type` has been renamed to `ItemType`

  * Requires registration in the `ItemType` registry
* `Tags` now require registration in the `ItemTag` registry

---

## Additional References

* Review mod examples for practical usage
* Base game script examples are now **generated from Java code**
* These scripts are still read by the game as before

---
